import{mode as e}from"@chakra-ui/theme-tools";import{usePopper as t,useStyles as n,useMultiStyleConfig as i,chakra as r,omitThemingProps as o,StylesProvider as l,HStack as s,Box as a,Tag as c,TagLabel as u,TagCloseButton as d,IconButton as h,forwardRef as p,Input as f}from"@chakra-ui/react";import{createContext as m,mergeRefs as g}from"@chakra-ui/react-utils";import*as v from"react";import{useRef as b,useMemo as y,useCallback as x,useEffect as S,useState as I,memo as O}from"react";import{jsx as w,jsxs as C}from"react/jsx-runtime";function _(t){return{bg:e("#fff","gray.700")(t),boxShadow:e("sm","dark-lg")(t),color:"inherit",w:"full",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",maxH:"64",overflowY:"auto",overscrollBehaviorY:"contain"}}const z={display:"flex",flex:1,flexWrap:"wrap",alignItems:"center"},E={display:"block",textAlign:"start"};function M(t){return{cursor:"pointer",transition:"background 50ms ease-out",_focus:{bg:e("gray.50","whiteAlpha.100")(t),boxShadow:"outline"},_active:{bg:e("gray.50","whiteAlpha.100")(t)},_expanded:{bg:e("gray.50","whiteAlpha.100")(t)},_selected:{bg:e("gray.100","whiteAlpha.300")(t)},_disabled:{opacity:.4,cursor:"not-allowed"}}}function k(e){return{borderRadius:"full",variant:"solid",colorscheme:e.colorscheme}}function T(t){return{variant:"ghost",_hover:{bg:e("gray.200","whiteAlpha.300")(t)},_focus:{bg:e("gray.200","whiteAlpha.300")(t),boxShadow:"outline"},_active:{bg:e("gray.100","whiteAlpha.100")(t)},colorscheme:t.colorscheme}}const L={h:"auto",minW:72,pr:1},R={display:"flex",alignItems:"center"},P={fontWeight:"semibold"},A={display:"inline",h:"full",border:0,borderColor:"inherit",my:1,opacity:.8};var V={defaultProps:{size:"md"},parts:["item","selectedItem","list","textList","selectedList","actionGroup","control","input","button","groupTitle","divider","label"],sizes:{sm:{control:{minH:8,spacing:1},input:{p:"px"},actionGroup:{spacing:"0"},list:{fontSize:"sm"},item:{py:1,px:2},textList:{py:0,px:1},selectedItem:{m:"px"},selectedList:{py:"px"},groupTitle:{mx:2,my:1,fontSize:"sm"}},md:{control:{minH:10,spacing:1},input:{p:"2px"},actionGroup:{spacing:"0"},list:{fontSize:"md"},item:{py:2,px:3},textList:{p:1},selectedItem:{m:"2px"},selectedList:{py:"2px"},groupTitle:{mx:4,my:2,fontSize:"sm"}},lg:{control:{minH:12,spacing:2},input:{p:1},actionGroup:{spacing:"0"},list:{fontSize:"lg"},item:{py:2,px:3},textList:{py:1,px:2},selectedItem:{m:1},selectedList:{py:1},groupTitle:{mx:4,my:2,fontSize:"sm"}}},baseStyle:e=>({list:_(e),selectedList:z,item:M(e),selectedItem:k(e),button:T(e),actionGroup:R,control:L,input:{bgColor:"transparent",appearance:"none",flex:1,outline:0},groupTitle:P,divider:A,label:E})};function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},D.apply(this,arguments)}function N(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t.indexOf(n=o[i])>=0||(r[n]=e[n]);return r}function j(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function B(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function W(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return B(n.overflowY,t)||B(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function F(e,t,n,i,r,o,l,s){return o<e&&l>t||o>e&&l<t?0:o<=e&&s<=n||l>=t&&s>=n?o-e-i:l>t&&s<n||o<e&&s>n?l-t+r:0}const H=["onKeyDown"],K=["refKey","ref","onChange","onFocus","onClick","onBlur"],G=["index","key","onClick","onMouseEnter","option"],$=["selected"];var U,Y;!function(e){e.SingleCreate="singleCreate",e.SingleRemove="singleRemove",e.SingleSelect="singleSelect",e.SingleClear="singleClear",e.MultiCreate="multiCreate",e.MultiRemove="multiRemove",e.MultiSelect="multiSelect",e.MultiClear="multiClear"}(U||(U={})),function(e){e.SetOpen="setOpen",e.SetSearch="setSearch",e.HighlightIndex="highlightIndex"}(Y||(Y={}));const X=[],q=[],J={searchValue:"",resolvedSearchValue:"",isOpen:!1,highlightedIndex:0},Q=(e,t)=>t,Z=(e,t,n,i)=>{i.current&&function(e,t){if(!e||!t)return;const n=function(e,t){var n=window,i=t.scrollMode,r=t.block,o=t.inline,l=t.boundary,s=t.skipOverflowHiddenElements,a="function"==typeof l?l:function(e){return e!==l};if(!j(e))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,u=[],d=e;j(d)&&a(d);){if((d=d.parentElement)===c){u.push(d);break}null!=d&&d===document.body&&W(d)&&!W(document.documentElement)||null!=d&&W(d,s)&&u.push(d)}for(var h=n.visualViewport?n.visualViewport.width:innerWidth,p=n.visualViewport?n.visualViewport.height:innerHeight,f=window.scrollX||pageXOffset,m=window.scrollY||pageYOffset,g=e.getBoundingClientRect(),v=g.height,b=g.width,y=g.top,x=g.right,S=g.bottom,I=g.left,O="start"===r||"nearest"===r?y:"end"===r?S:y+v/2,w="center"===o?I+b/2:"end"===o?x:I,C=[],_=0;_<u.length;_++){var z=u[_],E=z.getBoundingClientRect(),M=E.height,k=E.width,T=E.top,L=E.right,R=E.bottom,P=E.left;if("if-needed"===i&&y>=0&&I>=0&&S<=p&&x<=h&&y>=T&&S<=R&&I>=P&&x<=L)return C;var A=getComputedStyle(z),V=parseInt(A.borderLeftWidth,10),D=parseInt(A.borderTopWidth,10),N=parseInt(A.borderRightWidth,10),B=parseInt(A.borderBottomWidth,10),H=0,K=0,G="offsetWidth"in z?z.offsetWidth-z.clientWidth-V-N:0,$="offsetHeight"in z?z.offsetHeight-z.clientHeight-D-B:0;if(c===z)H="start"===r?O:"end"===r?O-p:"nearest"===r?F(m,m+p,p,D,B,m+O,m+O+v,v):O-p/2,K="start"===o?w:"center"===o?w-h/2:"end"===o?w-h:F(f,f+h,h,V,N,f+w,f+w+b,b),H=Math.max(0,H+m),K=Math.max(0,K+f);else{H="start"===r?O-T-D:"end"===r?O-R+B+$:"nearest"===r?F(T,R,M,D,B+$,O,O+v,v):O-(T+M/2)+$/2,K="start"===o?w-P-V:"center"===o?w-(P+k/2)+G/2:"end"===o?w-L+N+G:F(P,L,k,V,N+G,w,w+b,b);var U=z.scrollLeft,Y=z.scrollTop;O+=Y-(H=Math.max(0,Math.min(Y+H,z.scrollHeight-M+$))),w+=U-(K=Math.max(0,Math.min(U+K,z.scrollWidth-k+G)))}C.push({el:z,top:H,left:K})}return C}(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});n.forEach(({el:e,top:t,left:n})=>{e.scrollTop=t,e.scrollLeft=n})}(t.current,n.current)},ee=e=>`${e.charAt(0).toUpperCase()}${e.substring(1)}`,te=(e,t="")=>`${t}${null==e?void 0:e.value}`,ne=e=>"string"==typeof e?{value:e,label:ee(e)}:e,ie=e=>e.length>1e4?1e3:e.length>1e3?200:0,re=(e,t,n)=>e.filter(e=>n(e).value.toString().toLowerCase().includes(t.toString().toLowerCase())).sort(e=>n(e).value.toString().toLowerCase().indexOf(t.toString().toLowerCase()));function oe(e,t,n){return n?D({},e,"function"==typeof t?{[n]:t(e[n])}:{[n]:t}):"function"==typeof t?t(e):t}var le;!function(e){e.List="list",e.Input="input",e.Both="both"}(le||(le={}));const[se,ae]=m({strict:!1,name:"SelectContext"}),[ce,ue]=m({strict:!1,name:"SelectInputContext"}),[de,he]=m({strict:!1,name:"SelectedContext"}),[pe,fe]=m({strict:!1,name:"SelectedListContext"}),[me,ge]=m({strict:!1,name:"SelectActionContext"}),[ve,be]=m({strict:!1,name:"SelectIdContext"});function ye({create:e=!1,single:n=!1,disabled:i=!1,selectionVisibleIn:r=le.Input,getDebounce:o=ie,getOption:l=ne,stateReducer:s=Q,filterFn:a=re,scrollToIndex:c=Z,shiftAmount:u=5,duplicates:d,options:h,value:p,onChange:f,placement:m="bottom-start",placeholder:g,searchPlaceholder:v}){const[{searchValue:O,resolvedSearchValue:w,isOpen:C,highlightedIndex:_},z]=function(e,t){const n=b();n.current=t;const[i,r]=I(e);return[i,x((e,t)=>{if(!t)throw new Error("An action type is required to update the state");return r(i=>n.current(i,e(i),t))},[r])]}(J,s),E=!n,M=E&&!!(Array.isArray(p)?p.length>0:p),k=b(),T=b([]),L=b(""),R=b(),P=b(),A=b({}),V=b(),j=b(),B=b(),W=b(_),F=b(),$=b(!1),ee=t({placement:m});W.current=_,j.current=a,B.current=c,V.current=f,E&&void 0===p&&(p=X),h||(h=q);const te=h;h=y(()=>{var e,t;return r!==le.Input?null==(e=h)?void 0:e.map(e=>{var t;return D({},l(e),{selected:null==(t=Array.isArray(p)?p:[p||""])?void 0:t.some(t=>l(t).value===l(e).value)})}):E&&!d?null==(t=h)?void 0:t.filter(e=>{var t;return!(null!=(t=p)&&t.some(t=>l(t).value===l(e).value))}):h},[h,p,d,E,l,r]);const se=y(()=>E?p.map(e=>te.find(t=>l(t).value===l(e).value)||l(e)):te.find(e=>l(e).value===l(p).value)||l(p),[E,p,te,l]);h=y(()=>w?null==j.current?void 0:j.current(h,w,l):h,[h,w,l]),h=y(()=>e&&O?[D({created:!0},l(O)),...h]:h,[e,O,h,l]),L.current=p,T.current=h;const ae=x(e=>{z(t=>oe(t,e,"isOpen"),Y.SetOpen)},[]),ce=x(()=>{ae(!1)},[]),ue=x(()=>{ae(!0)},[]),de=function(e,t=0){const n=b(null),i=b();return i.current=e,S(()=>()=>{clearTimeout(n.current)},[t]),x(async(...e)=>(n.current&&clearTimeout(n.current),new Promise((r,o)=>{n.current=setTimeout(()=>{n.current=null;try{r(i.current(...e))}catch(e){o(e)}},t)})),[t])}(e=>{z(t=>oe(t,e,"resolvedSearchValue"),Y.SetSearch)},o(h)),he=x(e=>{z(t=>oe(t,e,"searchValue"),Y.SetSearch),de(e)},[]),pe=x(e=>{const t=T.current;z(n=>D({},n,{highlightedIndex:Math.min(Math.max(0,"function"==typeof e?e(n.highlightedIndex):e),t.length-1)}),Y.HighlightIndex)},[]),fe=x(t=>{const n=T.current[t];if(n){const e=l(n);if(E){const t=L.current;!d&&t.some(t=>l(t).value===e.value)||null==V.current||V.current([...t,e],{action:e.created?U.MultiCreate:U.MultiSelect,value:e})}else null==V.current||V.current(e.value,{action:e.created?U.SingleCreate:U.SingleSelect,value:e})}(e||E)&&he(""),E||ce()},[E,e,d,l]),me=x(()=>{null==V.current||V.current(E?[]:"",{action:E?U.MultiClear:U.SingleClear,value:""})},[E]),ge=x(e=>{const t="number"==typeof e,n=Array.isArray(L.current),i=n?L.current:[L.current],r=i.filter((n,i)=>t?i!==e:l(e).value!==l(n).value);n?V.current(r,{action:U.MultiRemove,value:l(t?i[e]:e).value}):V.current(r[0]||"",{action:U.SingleRemove,value:l(t?i[e]:e).value})},[l]),ve=x(e=>{i||(he(e.target.value),ue())},[i]),be=x(()=>{i||(e&&!E||he(""),ue())},[e,E,i]),ye=(e,t)=>({shift:n,meta:i},r)=>{r.preventDefault();const o=t||i?1e12:e||n?u-1:1;ue(),$.current=!0,pe(e=>e-o)},xe=(e,t)=>({shift:n,meta:i},r)=>{r.preventDefault();const o=t||i?1e12:e||n?u-1:1;ue(),$.current=!0,pe(e=>e+o)},Se=x((e,t)=>{if(C){const e=T.current;(O||e[W.current])&&t.preventDefault(),e[W.current]&&fe(W.current)}},[C,O]),Ie=x(()=>{const e=L.current,t=E?e[e.length-1]:e;(E&&!O||!E&&t)&&(ge(t),he(""))},[O,E]),Oe=(we={ArrowUp:ye(),ArrowDown:xe(),PageUp:ye(!0),PageDown:xe(!0),Home:ye(!1,!0),End:xe(!1,!0),Escape:ce,Tab:ce,Enter:Se,Backspace:Ie},(e={})=>{let{onKeyDown:t}=e;return D({},N(e,H),{onKeyDown:e=>{const{keyCode:n,key:i,shiftKey:r,metaKey:o}=e,l=we[i]||we[n];l&&l({keyCode:n,key:i,shift:r,meta:o},e),t&&t(e)}})});var we;const Ce=x((e={})=>{let{refKey:t="ref",ref:n,onChange:i,onFocus:r,onClick:o,onBlur:l}=e,s=N(e,K);return Oe(D({[t]:e=>{R.current=e,n&&(n.current=e)},value:(C?O||se.label:se?null==se?void 0:se.label:"")||"",placeholder:M&&!O?v:null!=se&&se.label?void 0:g,onChange:e=>{ve(e),i&&i(e)},onFocus:e=>{be(),r&&r(e)},onClick:e=>{be(),o&&o(e)},onBlur:e=>{l&&(e.persist(),A.current.cb=l,A.current.event=e)}},s))},[C,O,se,be,ve,g,v,M]),_e=x((e={})=>{let{index:t,key:n=t,onClick:i,onMouseEnter:r,option:o}=e,l=N(e,G);if("number"!=typeof t||t<0)throw new Error("useSelect: The getOptionProps prop getter requires an index property, eg. 'getOptionProps({index: 1})'");return D({key:n,option:o},l,{onClick:e=>{void 0!==o.selected&&o.selected?ge(o.value):fe(t),i&&i(e)},onMouseEnter:e=>{$.current=!1,pe(t),r&&r(e)}})},[]);return function(e,t,n,i){const r=b(),o=b(),l=b();l.current=t;const s=n||r,a=i||o,c=x(e=>{if("click"===e.type&&"touchstart"===e.type)return;const t=a.current,n=s.current;null!=t&&t.contains(e.target)||null!=n&&n.contains(e.target)||l.current(e)},[]);S(()=>(e&&(document.addEventListener("touchstart",c,!0),document.addEventListener("click",c,!0)),()=>{document.removeEventListener("touchstart",c,!0),document.removeEventListener("click",c,!0)}),[e,c])}(C,ce,k,P),S(()=>{C&&i&&ae(!1)},[C,i]),S(()=>{O&&pe(0)},[O,pe]),S(()=>{var e,t;pe(0),!C&&null!=(e=A.current)&&e.event&&(null==(t=A.current)||t.cb(A.current.event),A.current.event=null)},[C]),S(()=>{null==B.current||B.current(_,F,k,$)},[_]),S(()=>{C&&R.current&&setTimeout(()=>{var e;null==(e=R.current)||e.focus()})},[C]),{multi:E,clearable:M,disabled:i,clearAll:me,optionsRef:k,controlRef:P,popper:ee,value:p,searchValue:O,isOpen:C,highlightedIndexRef:W,highlightedValueRef:F,enableScrollRef:$,selectedOption:se,visibleOptions:h,selectionVisibleIn:r,selectIndex:fe,removeValue:ge,setOpen:ae,setSearch:he,highlightIndex:pe,getInputProps:Ce,getOptionProps:_e,getOption:l}}function xe(e={}){const{clearAll:t,clearable:i}=ge(),r=n(),o=x(e=>{e.preventDefault(),e.stopPropagation(),t()},[]);return D({},e,{clearOnClick:o,clearable:i,__css:r.actionGroup})}function Se(e={}){const{selectLabelId:t,selectInputId:r}=be(),{getInputProps:o}=ue(),{fontSize:l}=i("Input",e).field||{},s=n();return D({},e,o(),{__css:D({fontSize:l},s.input),id:r,"aria-labelledby":t})}function Ie(e={}){const{selectLabelId:t,selectInputId:r}=be();return D({},e,{__css:D({},i("FormLabel",e)||{},n().label),id:t,htmlFor:r})}function Oe(e={}){var t;const{isOpen:i,setOpen:r}=ge(),o=x(e=>{e.preventDefault(),e.stopPropagation(),r(e=>!e)},[r]),l=n();return D({},e,{__css:D({},l.button,null==(t=i&&l.button)?void 0:t._active),isOpen:i,onClick:o})}function we(e={}){return D({},e,{__css:D({},n().button)})}function Ce(e={}){const{removeValue:t}=he(),i=n(),r=x(()=>t(e.value),[e.value]);return y(()=>({key:e.key||e.value,onClick:r,__css:i.selectedItem,value:e.value,label:e.label||ee(e.value)}),[e.value,e.label,e.key,r,i.selectedItem])}function _e(e={}){let{selected:t}=e,i=N(e,$);const{getOptionProps:r,highlightedIndexRef:o,highlightedValueRef:l,multi:s}=ae(),a=n(),c=o.current===i.index;return y(()=>{var e,n;const o={value:i.value,label:i.label||ee(i.value),selected:t};return D({},r({option:o,key:i.key||te(o),index:i.index}),{multi:s,highlightedRef:c?l:void 0,__css:D({},a.item,null==(e=t&&a.item)?void 0:e._selected,null==(n=c&&a.item)?void 0:n._active)})},[c,t,i.key,i.label,i.value,i.index,a.item,s])}function ze(){const{isOpen:e,getOption:t,optionsRef:i,popper:r,visibleOptions:o,multi:l}=ae(),s=n();return y(()=>({ref:g(i,r.popperRef),optionsRef:i,isOpen:e,visibleOptions:o,getOption:t,__css:s.list,"aria-multiselectable":l,"aria-hidden":!e}),[e,o,s.list,l])}function Ee(e={}){const{visibleOptions:t,getOption:i}=ae(),{value:r,multi:o,selectionVisibleIn:l}=fe(),s=n();return D({},e,{multi:o,selectedItems:y(()=>r&&Array.isArray(r)?r.map(e=>i(e)):[],[r,t]),selectionVisibleIn:l,__css:s.selectedList,textList:{__css:s.textList}})}function Me(e={}){var t,r;const{isOpen:o,popper:l,controlRef:s,disabled:a}=ae(),c=i("Input",e)||{},u=n();return D({},e,y(()=>({ref:g(e.ref,s,l.referenceRef)}),[e.ref,s,l.referenceRef]),{isOpen:o,disabled:a,__css:D({},u.field,u.control,{_focusWithin:null==(t=c.field)?void 0:t._focusVisible,_disabled:null==(r=c.field)?void 0:r._disabled})})}const ke=(e=21)=>{const t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_";let n="";for(let i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n};function Te(){const e=b();return e.current||(e.current=ke()),e.current}function Le(e={}){const t=e.getOption||ne,[n,i]=I(e.value),[r,o]=I(()=>e.options.map(t)),l=b();l.current=e.onChange;const s=x((e,t)=>{i(e),null==l.current||l.current(e,t)},[]);return{value:n,options:r,onChange:x((e,n)=>{switch(null==n?void 0:n.action){case U.SingleCreate:s(e,n),o(n=>{const i=t(e);return n.some(e=>t(e).value===i.value)?n:[D({},i,{created:!0}),...n]});break;case U.SingleClear:case U.SingleRemove:case U.SingleSelect:s(e,n);break;case U.MultiCreate:const i=e[e.length-1];s(e,n),o(e=>{const n=t(i);return e.some(e=>t(e).value===n.value)?e:[D({},n,{created:!0}),...e]});break;default:s(e,n)}},[i,o,t])}}function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Re.apply(this,arguments)}function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pe.apply(this,arguments)}function Ae(e,t,n){var i,r,o=null!=(i=n.initialDeps)?i:[];return function(){var i;n.key&&null!=n.debug&&n.debug()&&(i=Date.now());var l,s=e();if(s.length===o.length&&!s.some(function(e,t){return o[t]!==e}))return r;if(o=s,n.key&&null!=n.debug&&n.debug()&&(l=Date.now()),r=t.apply(void 0,s),n.key&&null!=n.debug&&n.debug()){var a=Math.round(100*(Date.now()-i))/100,c=Math.round(100*(Date.now()-l))/100,u=c/16,d=function(e,t){for(e=String(e);e.length<t;)e=" "+e;return e};console.info("%câ± "+d(c,5)+" /"+d(a,5)+" ms","\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl("+Math.max(0,Math.min(120-120*u,120))+"deg 100% 31%);",null==n?void 0:n.key)}return null==n||null==n.onChange||n.onChange(r),r}}function Ve(e,t){if(void 0===e)throw new Error("Unexpected undefined"+(t?": "+t:""));return e}var De=function(e){return e},Ne=function(e){for(var t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),i=[],r=t;r<=n;r++)i.push(r);return i},je=function(e,t){var n=e.scrollElement;if(n){var i=function(e){var n=e.height;t({width:Math.round(e.width),height:Math.round(n)})};i(n.getBoundingClientRect());var r=new ResizeObserver(function(e){var t=e[0];if(null!=t&&t.borderBoxSize){var r=t.borderBoxSize[0];if(r)return void i({width:r.inlineSize,height:r.blockSize})}i(n.getBoundingClientRect())});return r.observe(n,{box:"border-box"}),function(){r.unobserve(n)}}},Be=function(e,t){var n=e.scrollElement;if(n){var i=function(){t(n[e.options.horizontal?"scrollLeft":"scrollTop"])};return i(),n.addEventListener("scroll",i,{passive:!0}),function(){n.removeEventListener("scroll",i)}}},We=function(e,t,n){if(null!=t&&t.borderBoxSize){var i=t.borderBoxSize[0];if(i)return Math.round(i[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},Fe=function(e,t,n){var i,r,o=t.adjustments,l=t.behavior;null==(i=n.scrollElement)||null==i.scrollTo||i.scrollTo(((r={})[n.options.horizontal?"left":"top"]=e+(void 0===o?0:o),r.behavior=l,r))},He=function(e){var t,n,i=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(t=null,n=function(){return t||("undefined"!=typeof ResizeObserver?t=new ResizeObserver(function(e){e.forEach(function(e){i._measureElement(e.target,e)})}):null)},{disconnect:function(){var e;return null==(e=n())?void 0:e.disconnect()},observe:function(e){var t;return null==(t=n())?void 0:t.observe(e,{box:"border-box"})},unobserve:function(e){var t;return null==(t=n())?void 0:t.unobserve(e)}}),this.range={startIndex:0,endIndex:0},this.setOptions=function(e){Object.entries(e).forEach(function(t){void 0===t[1]&&delete e[t[0]]}),i.options=Pe({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:De,rangeExtractor:Ne,onChange:function(){},measureElement:We,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},e)},this.notify=function(){null==i.options.onChange||i.options.onChange(i)},this.cleanup=function(){i.unsubs.filter(Boolean).forEach(function(e){return e()}),i.unsubs=[],i.scrollElement=null},this._didMount=function(){return i.measureElementCache.forEach(i.observer.observe),function(){i.observer.disconnect(),i.cleanup()}},this._willUpdate=function(){var e=i.options.getScrollElement();i.scrollElement!==e&&(i.cleanup(),i.scrollElement=e,i._scrollToOffset(i.scrollOffset,{adjustments:void 0,behavior:void 0}),i.unsubs.push(i.options.observeElementRect(i,function(e){var t=i.scrollRect;i.scrollRect=e,(i.options.horizontal?e.width!==t.width:e.height!==t.height)&&i.maybeNotify()})),i.unsubs.push(i.options.observeElementOffset(i,function(e){i.scrollAdjustments=0,i.scrollOffset!==e&&(null!==i.isScrollingTimeoutId&&(clearTimeout(i.isScrollingTimeoutId),i.isScrollingTimeoutId=null),i.isScrolling=!0,i.scrollDirection=i.scrollOffset<e?"forward":"backward",i.scrollOffset=e,i.maybeNotify(),i.isScrollingTimeoutId=setTimeout(function(){i.isScrollingTimeoutId=null,i.isScrolling=!1,i.scrollDirection=null,i.maybeNotify()},i.options.scrollingDelay))})))},this.getSize=function(){return i.scrollRect[i.options.horizontal?"width":"height"]},this.memoOptions=Ae(function(){return[i.options.count,i.options.paddingStart,i.options.scrollMargin,i.options.getItemKey]},function(e,t,n,r){return i.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:n,getItemKey:r}},{key:!1}),this.getFurthestMeasurement=function(e,t){for(var n=new Map,r=new Map,o=t-1;o>=0;o--){var l=e[o];if(!n.has(l.lane)){var s=r.get(l.lane);if(null==s||l.end>s.end?r.set(l.lane,l):l.end<s.end&&n.set(l.lane,!0),n.size===i.options.lanes)break}}return r.size===i.options.lanes?Array.from(r.values()).sort(function(e,t){return e.end-t.end})[0]:void 0},this.getMeasurements=Ae(function(){return[i.memoOptions(),i.itemSizeCache]},function(e,t){var n=e.count,r=e.paddingStart,o=e.scrollMargin,l=e.getItemKey,s=i.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,i.pendingMeasuredCacheIndexes):0;i.pendingMeasuredCacheIndexes=[];for(var a=i.measurementsCache.slice(0,s),c=s;c<n;c++){var u=l(c),d=1===i.options.lanes?a[c-1]:i.getFurthestMeasurement(a,c),h=d?d.end:r+o,p=t.get(u),f="number"==typeof p?p:i.options.estimateSize(c);a[c]={index:c,start:h,size:f,end:h+f,key:u,lane:d?d.lane:c%i.options.lanes}}return i.measurementsCache=a,a},{key:"production"!==process.env.NODE_ENV&&"getMeasurements",debug:function(){return i.options.debug}}),this.calculateRange=Ae(function(){return[i.getMeasurements(),i.getSize(),i.scrollOffset]},function(e,t,n){return i.range=function(e){for(var t=e.measurements,n=e.outerSize,i=e.scrollOffset,r=t.length-1,o=Ke(0,r,function(e){return t[e].start},i),l=o;l<r&&t[l].end<i+n;)l++;return{startIndex:o,endIndex:l}}({measurements:e,outerSize:t,scrollOffset:n})},{key:"production"!==process.env.NODE_ENV&&"calculateRange",debug:function(){return i.options.debug}}),this.maybeNotify=Ae(function(){var e=i.calculateRange();return[e.startIndex,e.endIndex,i.isScrolling]},function(){i.notify()},{key:"production"!==process.env.NODE_ENV&&"maybeNotify",debug:function(){return i.options.debug},initialDeps:[this.range.startIndex,this.range.endIndex,this.isScrolling]}),this.getIndexes=Ae(function(){return[i.options.rangeExtractor,i.calculateRange(),i.options.overscan,i.options.count]},function(e,t,n,i){return e(Pe({},t,{overscan:n,count:i}))},{key:"production"!==process.env.NODE_ENV&&"getIndexes",debug:function(){return i.options.debug}}),this.indexFromElement=function(e){var t=i.options.indexAttribute,n=e.getAttribute(t);return n?parseInt(n,10):(console.warn("Missing attribute name '"+t+"={index}' on measured element."),-1)},this._measureElement=function(e,t){var n,r=i.indexFromElement(e),o=i.measurementsCache[r];if(o){var l=i.measureElementCache.get(o.key);if(!e.isConnected)return i.observer.unobserve(e),void(e===l&&i.measureElementCache.delete(o.key));l!==e&&(l&&i.observer.unobserve(l),i.observer.observe(e),i.measureElementCache.set(o.key,e));var s=i.options.measureElement(e,t,i),a=s-(null!=(n=i.itemSizeCache.get(o.key))?n:o.size);0!==a&&(o.start<i.scrollOffset&&("production"!==process.env.NODE_ENV&&i.options.debug&&console.info("correction",a),i._scrollToOffset(i.scrollOffset,{adjustments:i.scrollAdjustments+=a,behavior:void 0})),i.pendingMeasuredCacheIndexes.push(r),i.itemSizeCache=new Map(i.itemSizeCache.set(o.key,s)),i.notify())}},this.measureElement=function(e){e&&i._measureElement(e,void 0)},this.getVirtualItems=Ae(function(){return[i.getIndexes(),i.getMeasurements()]},function(e,t){for(var n=[],i=0,r=e.length;i<r;i++)n.push(t[e[i]]);return n},{key:"production"!==process.env.NODE_ENV&&"getIndexes",debug:function(){return i.options.debug}}),this.getVirtualItemForOffset=function(e){var t=i.getMeasurements();return Ve(t[Ke(0,t.length-1,function(e){return Ve(t[e]).start},e)])},this.getOffsetForAlignment=function(e,t){var n=i.getSize();"auto"===t&&(t=e<=i.scrollOffset?"start":e>=i.scrollOffset+n?"end":"start"),"start"===t||("end"===t?e-=n:"center"===t&&(e-=n/2));var r=i.options.horizontal?"scrollWidth":"scrollHeight",o=(i.scrollElement?"document"in i.scrollElement?i.scrollElement.document.documentElement[r]:i.scrollElement[r]:0)-i.getSize();return Math.max(Math.min(o,e),0)},this.getOffsetForIndex=function(e,t){void 0===t&&(t="auto"),e=Math.max(0,Math.min(e,i.options.count-1));var n=Ve(i.getMeasurements()[e]);if("auto"===t)if(n.end>=i.scrollOffset+i.getSize()-i.options.scrollPaddingEnd)t="end";else{if(!(n.start<=i.scrollOffset+i.options.scrollPaddingStart))return[i.scrollOffset,t];t="start"}return[i.getOffsetForAlignment("end"===t?n.end+i.options.scrollPaddingEnd:n.start-i.options.scrollPaddingStart,t),t]},this.isDynamicMode=function(){return i.measureElementCache.size>0},this.cancelScrollToIndex=function(){null!==i.scrollToIndexTimeoutId&&(clearTimeout(i.scrollToIndexTimeoutId),i.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(e,t){var n=void 0===t?{}:t,r=n.align,o=void 0===r?"start":r,l=n.behavior;i.cancelScrollToIndex(),"smooth"===l&&i.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),i._scrollToOffset(i.getOffsetForAlignment(e,o),{adjustments:void 0,behavior:l})},this.scrollToIndex=function(e,t){var n=void 0===t?{}:t,r=n.align,o=void 0===r?"auto":r,l=n.behavior;e=Math.max(0,Math.min(e,i.options.count-1)),i.cancelScrollToIndex(),"smooth"===l&&i.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var s=i.getOffsetForIndex(e,o),a=s[1];i._scrollToOffset(s[0],{adjustments:void 0,behavior:l}),"smooth"!==l&&i.isDynamicMode()&&(i.scrollToIndexTimeoutId=setTimeout(function(){if(i.scrollToIndexTimeoutId=null,i.measureElementCache.has(i.options.getItemKey(e))){var t=i.getOffsetForIndex(e,a);Math.abs(t[0]-i.scrollOffset)<1||i.scrollToIndex(e,{align:a,behavior:l})}else i.scrollToIndex(e,{align:a,behavior:l})}))},this.scrollBy=function(e,t){var n=(void 0===t?{}:t).behavior;i.cancelScrollToIndex(),"smooth"===n&&i.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),i._scrollToOffset(i.scrollOffset+e,{adjustments:void 0,behavior:n})},this.getTotalSize=function(){var e;return((null==(e=i.getMeasurements()[i.options.count-1])?void 0:e.end)||i.options.paddingStart)-i.options.scrollMargin+i.options.paddingEnd},this._scrollToOffset=function(e,t){i.options.scrollToFn(e,{behavior:t.behavior,adjustments:t.adjustments},i)},this.measure=function(){i.itemSizeCache=new Map,i.notify()},this.setOptions(e),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(e){i.itemSizeCache.set(e.key,e.size)}),this.maybeNotify()},Ke=function(e,t,n,i){for(;e<=t;){var r=(e+t)/2|0,o=n(r);if(o<i)e=r+1;else{if(!(o>i))return r;t=r-1}}return e>0?e-1:0},Ge="undefined"!=typeof document?v.useLayoutEffect:v.useEffect;const $e=["value","label","index","selected","created"],Ue=["highlightedRef","option","multi"],Ye=["index","size","start","item","optionItemProps"],Xe=["__css","visibleOptions","isOpen","getOption","ref","optionsRef"],qe=["isActive","width","height","__css"],Je=["width","height"],Qe=["value","label"],Ze=["onClick","__css","value","label"],et=["__css","size","ariaLabel","icon","isOpen"],tt=["__css","size","ariaLabel","icon"],nt=["children"],it=["__css","textList","selectedItems","multi","selectionVisibleIn"],rt=["__css","clearable","clearOnClick","clearButtonProps","toggleButtonProps"],ot=["children"],lt=["label","labelProps","controlProps","listProps","selectedListProps","actionGroupProps","size"],st=r("svg"),at=O(e=>{const{children:t}=e,n=i("MultiSelect",e),s=o(e),a=Te(),c=Te(),u=y(()=>({selectLabelId:a,selectInputId:c}),[]),d=ye(s),h=y(()=>d,[d]),p=y(()=>({getInputProps:d.getInputProps}),[d.getInputProps]),f=y(()=>({removeValue:d.removeValue}),[d.removeValue]),m=y(()=>({value:d.value,multi:d.multi,selectionVisibleIn:d.selectionVisibleIn}),[d.value,d.multi,d.selectionVisibleIn]),g=y(()=>({isOpen:d.isOpen,setOpen:d.setOpen,clearable:d.clearable,clearAll:d.clearAll}),[d.isOpen,d.setOpen,d.clearable,d.clearAll]);return w(l,{value:n,children:w(ve,{value:u,children:w(se,{value:h,children:w(ce,{value:p,children:w(pe,{value:m,children:w(de,{value:f,children:w(me,{value:g,children:w(r.div,{pos:"relative",display:"flex",flexDirection:"column",children:t})})})})})})})})});at.displayName="Select";const ct=O(e=>{const t=Ie(e);return w(r.label,D({},e,t))});ct.displayName="SelectLabel";const ut=O(({label:e,created:t})=>C(s,{justifyContent:"space-between",w:"full",children:[w(a,{children:e}),!!t&&w(c,{flexShrink:0,children:w(u,{fontSize:"xs",fontWeight:"bold",children:"New"})})]}));ut.displayName="SelectOptionLabel";const dt=O(e=>{let{value:t,label:n,index:i,selected:o,created:l}=e,s=N(e,$e);const a=_e({value:t,label:n,index:i,selected:o}),{highlightedRef:c,option:u,multi:d}=a,h=N(a,Ue);return w(r.li,D({ref:c&&c,role:"option"},(o||d)&&{"aria-selected":!!o},s,h,{children:w(ut,{label:(null==u?void 0:u.label)||t,created:!!l})}))});dt.displayName="SelectOptionItem";const ht=O(e=>{let{index:t,size:n,start:i,item:r,optionItemProps:o}=e,l=N(e,Ye);return w(dt,D({},o(r.value,t),{style:{position:"absolute",top:0,left:0,width:"100%",height:`${n}px`,transform:`translateY(${i}px)`},selected:r.selected,created:r.created,label:r.label},l))});ht.displayName="SelectOptionVirtualItem";const pt=O(({label:e="No results found"})=>{const t=n();return w(r.li,{__css:t.item,children:w(ut,{label:e})})});pt.displayName="EmptySelectResults";const ft=O(e=>{const t=ze(),{__css:n,visibleOptions:i,isOpen:o,getOption:l,ref:s,optionsRef:a}=t,c=N(t,Xe),u=o,d=x((e,t)=>{const n=l(e);return{key:n.id||te(n,"option-"),value:n.value,label:n.label||ee(n.value),selected:n.selected,created:n.created,index:t}},[]),h=y(()=>"lg"===e.size?43:"sm"===e.size?29:40,[e.size]),p=(f=Re({observeElementRect:je,observeElementOffset:Be,scrollToFn:Fe},{count:i.length,getScrollElement:()=>a.current,estimateSize:()=>h}),m=v.useReducer(function(){return{}},{})[1],g=Re({},f,{onChange:function(e){m(),null==f.onChange||f.onChange(e)}}),(b=v.useState(function(){return new He(g)})[0]).setOptions(g),v.useEffect(function(){return b._didMount()},[]),Ge(function(){return b._willUpdate()}),b);var f,m,g,b;return w(r.ul,D({ref:s,__css:y(()=>D({listStyle:"none",position:"absolute"},!u&&{display:"none"},n),[u,n]),"aria-orientation":"vertical",role:"listbox"},c,e,{children:u&&i.length>0?w("div",{style:{height:`${p.getTotalSize()}px`,width:"100%",position:"relative"},children:p.getVirtualItems().map(e=>w(ht,{optionItemProps:d,item:i[e.index],index:e.index,size:e.size,start:e.start},e.key))}):u?w(pt,{label:e.emptyResultsLabel}):null}))});ft.displayName="SelectList";const mt=e=>{let{isActive:t,width:n=4,height:i=4,__css:r}=e,o=N(e,qe);return w(st,D({viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",width:n,height:i,__css:D({},r,t&&(null==r?void 0:r._active))},o,{children:w("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}))},gt=e=>{let{width:t=4,height:n=4}=e,i=N(e,Je);return w(st,D({viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",width:t,height:n},i,{children:w("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}))},vt=O(e=>{const t=Se(e);return w(r.input,D({},t))});vt.displayName="SelectInput";const bt=O(e=>{let{value:t,label:n}=e,i=N(e,Qe);const r=Ce(D({value:t,label:n||"",key:i.key||""},i)),{onClick:o,__css:l,value:s,label:a}=r,h=N(r,Ze);return C(c,D({size:i.size},{sm:{fontSize:"sm"},md:{fontSize:"md"},lg:{fontSize:"lg"}}[i.size||"md"]||{},l,h,{role:"listitem",children:[w(u,{children:a||s}),w(d,{onClick:o})]}))});bt.displayName="SelectedItem";const yt=O(e=>{const t=Oe(e),{__css:n,size:i="sm",ariaLabel:r="toggle menu",icon:o=mt,isOpen:l}=t,s=N(t,et),a={sm:{height:"6",width:"6"},md:{height:"8",width:"8"},lg:{height:"10",width:"10"}}[i]||{};return w(h,D({tabIndex:0,size:i,"aria-label":r,"aria-haspopup":!0,"aria-expanded":!e.disabled&&l,icon:w(o,{isActive:!e.disabled&&l,__css:e.disabled?void 0:{transitionDuration:"200ms",transitionProperty:"transform",_active:{transform:"rotate(180deg)"}}}),minWidth:0},a,n,s))});yt.displayName="SelectToggleButton";const xt=O(e=>{const t=we(e),{__css:n,size:i="sm",ariaLabel:r="clear all selected",icon:o=gt}=t,l=N(t,tt),s={sm:{height:"6",width:"6"},md:{height:"8",width:"8"},lg:{height:"10",width:"10"}}[i]||{};return w(h,D({tabIndex:0,size:i,"aria-label":r,icon:w(o,{}),minWidth:0},s,n,l))});xt.displayName="SelectClearButton";const St=O(e=>{let{children:t}=e,n=N(e,nt);const i=Ee(n),{__css:r,textList:o,selectedItems:l,multi:s,selectionVisibleIn:c}=i,u=N(i,it),d=s&&c!==le.List,h=s&&c===le.List;return C(a,D({},r,u,d?{role:"list"}:null,{children:[d&&(null==l?void 0:l.map(e=>w(bt,{size:n.size,value:e.value,label:e.label},`selected-item-${e.value}`))),h&&!(null==l||!l.length)&&w(a,D({"aria-current":"true"},null==o?void 0:o.__css,{children:null==l?void 0:l.map(({label:e})=>e).join(", ")})),t]}))});St.displayName="SelectedList";const It=O(e=>{const t=xe(e),{__css:n,clearable:i,clearOnClick:r,clearButtonProps:o,toggleButtonProps:l}=t,a=N(t,rt);return C(s,D({},n,a,{children:[i&&w(xt,D({size:e.size,onClick:r},o)),w(yt,D({size:e.size,disabled:e.disabled},l))]}))});It.displayName="SelectActionGroup";const Ot=p((e,t)=>{let{children:n}=e,i=N(e,ot);const{ref:r,__css:o}=Me({ref:t});return w(f,D({ref:r,as:s},o,i,{children:n}))}),wt=e=>{let{label:t,labelProps:n,controlProps:i,listProps:r,selectedListProps:o,actionGroupProps:l,size:s="md"}=e,a=N(e,lt);return C(at,D({size:s},a,{children:[t&&w(ct,D({size:s},n,{children:t})),C(Ot,D({size:s,disabled:a.disabled},i,{children:[w(St,D({size:s},o,{children:w(vt,{size:s,disabled:a.disabled})})),w(It,D({size:s,disabled:a.disabled},l))]})),w(ft,D({size:s},r))]}))};export{st as ChakraSvg,U as ChangeActions,pt as EmptySelectResults,wt as MultiSelect,V as MultiSelectTheme,at as Select,It as SelectActionGroup,me as SelectActionProvider,Y as SelectActions,xt as SelectClearButton,Ot as SelectControl,ve as SelectIdProvider,vt as SelectInput,ce as SelectInputProvider,ct as SelectLabel,ft as SelectList,dt as SelectOptionItem,ut as SelectOptionLabel,ht as SelectOptionVirtualItem,se as SelectProvider,yt as SelectToggleButton,bt as SelectedItem,St as SelectedList,pe as SelectedListProvider,de as SelectedProvider,le as SelectionVisibilityMode,te as idFromOption,ee as labelFromValue,ke as uid,we as useClearButton,Te as useId,Le as useMultiSelect,ye as useSelect,ge as useSelectActionContext,xe as useSelectActionGroup,Oe as useSelectButton,ae as useSelectContext,Me as useSelectControl,be as useSelectIdContext,Se as useSelectInput,ue as useSelectInputContext,_e as useSelectItem,Ie as useSelectLabel,ze as useSelectList,he as useSelectedContext,Ce as useSelectedItem,Ee as useSelectedList,fe as useSelectedListContext};
//# sourceMappingURL=index.modern.mjs.map
